extends layout

block content
  include includes/internal-nav
  .message
    if success
      if success.delete
        p.success Article deleted successfully
    else if error
      if error.create
        p.error Error: Article could not be created
      else if error.delete
        p.error Error: Article could not be deleted
  aside.closetControls
    a(id="newArticle" href="closet/article/new") New Article
    form(action=action method="post" id="closetFilterForm")
      label(for="color") Color
      select(id="color" name="color")
        option(value="*" selected) -- color --
        option(value="red") Red 
        option(value="orange") Orange 
        option(value="yellow") Yellow 
        option(value="green") Green 
        option(value="blue") Blue 
        option(value="purple") Purple 
        option(value="brown") Brown 
        option(value="black") Black 
        option(value="white") White 
        option(value="multiple") Multiple 

      label(for="type") Type
      select(id="type" name="type")
        option(value="*" selected) -- type --
        option(value="top") Top
        option(value="bottom") Bottom
        option(value="one piece") One-Piece

      label(for="dresscode") Dress Code
      select(id="dresscode" name="dress_code")
        option(value="*" selected) -- dress code --
        option(value="casual") Casual
        option(value="semi-formal") Semi-Formal
        option(value="formal") Formal

      label(for="clean") Clean
      select(id="clean" name="clean")
        option(value="*" selected) -- clean --
        option(value="f") Clean
        option(value="t") Dirty

      label(for="temp_min") Temp-Minimum
      <div class="slidecontainerMin">
        <input type="range" min="-15" max="120" value="-15" class="slider" id="temp_min" name="temp_min">
        <p>Value: <span id="minVal"></span></p>
      </div>

      label(for="temp_max") Temp-Maximum
      <div class="slidecontainerMax">
        <input type="range" min="-15" max="120" value="120" class="slider" id="temp_max" name="temp_max">
        <p>Value: <span id="maxVal"></span></p>
      </div>

      input(type="submit" value="Filter")

  main
    mixin article(articlePath, imgPath, name, desc)
      .article(role='button' tabindex='0')
        .cardimg
          img(src=imgPath)
        .cardtext
          .name= name
          .desc= desc
        input(type='hidden', value=articlePath)
    if articles
      each item in articles
        +article(
          `/article?id=${item.article_id}`,
          '/user_img/liam/' + item.dataValues.filepath,
          item.dataValues.name, 
          item.dataValues.desc)
    else
      .error
        p Error: Closet data unavailable. Please try again later.
    script(src='/scripts/closet_page.js', type='text/javascript')
